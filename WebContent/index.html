<!DOCTYPE HTML>
<html>

<head>

<!-- switch off caching -->
<meta http-equiv="cache-control" content="max-age=0" />
<meta http-equiv="cache-control" content="no-cache" />
<meta http-equiv="expires" content="0" />
<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
<meta http-equiv="pragma" content="no-cache" />

<!-- others -->
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="UTF-8">
<meta name="format-detection" content="telephone=no" />
<meta name="msapplication-tap-highlight" content="no" />
<meta name="viewport"
  content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<title>HMMA IM</title>

<script id="sap-ui-bootstrap"
  src = "https://sapui5.hana.ondemand.com/1.38.19/resources/sap-ui-core.js"  
//  src = "1.36.10/resources/sap-ui-core.js"
  data-sap-ui-libs="sap.m,sap.ui.unified,sap.ui.core"
  data-sap-ui-theme="sap_bluecrystal"
  data-sap-ui-xx-bindingSyntax="complex"
  data-sap-ui-appCacheBuster="./"
  
  sap-ui-xx-componentPreload="auto"
  data-sap-ui-resourceroots='{
            "zhmmaim": "./"
        }'>


// 04/23/2018
//  src = "../../resources/sap-ui-core.js"
//  src = "1.36.10/resources/sap-ui-core.js"
//  src = "https://sapui5.netweaver.ondemand.com/1.40.10/resources/sap-ui-core.js"
//  src = "1.36.10/resources/sap-ui-cachebuster/sap-ui-core.js"
//  data-sap-ui-appCacheBuster="./"
// <!-- sap-ui-debug="true"  sap-ui-debug=X -->
        </script>

<script type='text/javascript' src='resources/js/jspdf.min.js'></script>
<script type='text/javascript' src='resources/js/html2canvas.min.js'></script>
<script type='text/javascript' src='resources/js/div2img.js'></script>
<script>
        jQuery(function() {
            $.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-core');
            $.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-widget');
            $.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-mouse');
            $.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-sortable');
            $.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-droppable');
            $.sap.require('sap.ui.thirdparty.jqueryui.jquery-ui-draggable');
            jQuery.sap.require("jquery.sap.storage");
            jQuery.sap.require("zhmmaim.util.APP_CONTAINS");

			oName = [];
            oStorage = [];
            oImage = [];

            var name = [];
            var value = [];

            if (FileReader.prototype.readAsBinaryString === undefined) {
              FileReader.prototype.readAsBinaryString = function (fileData) {
                  var binary = "";
                  var pt = this;
                  var reader = new FileReader();
                  reader.onload = function (e) {
                      var bytes = new Uint8Array(reader.result);
                      var length = bytes.byteLength;
                      for (var i = 0; i < length; i++) {
                          binary += String.fromCharCode(bytes[i]);
                      }
                      //pt.result  - readonly so assign content to another property
                      pt.content = binary;
            //binary file
            value.push(btoa(pt.content));
            oStorage = [];
            oStorage.push(value);

            //fileName
            name.push(pt.fileName);
            oName = [];
            oName.push(name);

                      $(pt).trigger('onload');
                  }
                  reader.readAsArrayBuffer(fileData);
              }
          }

            //Define Log Off Button
            var oLogoff = new sap.m.Button("Logoff",{
              icon:"sap-icon://log",
              text:"Logoff",
              press:function(){//Logout Function
                  oJQueryStorage.clear();
                  $.ajax({
                    type:"GET",
                    url:"/sap/public/bc/icf/logoff",
                  })
                  window.location.replace(sIndex);
              }
            });

            //Define Resposive Popover
            var oResponsivePopover = new sap.m.ResponsivePopover({
              placement:"Bottom",
              showHeader:false,
              content:[oLogoff]
            });

            oJQueryStorage = jQuery.sap.storage(jQuery.sap.storage.Type.session);
            var oUserInfo = oJQueryStorage.get("UserInfo");
            //console.log("oUserInfo="+oUserInfo)
           // console.log("oUserInfo.PERNR="+oUserInfo.PERNR)
            if(!oUserInfo){//User 정보 없는 경우
              oUserName = "";
            }else{
              oUserName = oUserInfo.NAME_TEXT;
            }

            sap.ui.getCore().attachInit(function() {
                new sap.ui.unified.Shell("oAppShell",
                  {
                    icon:"resources/images/logo_white.png", width:"280px",height:"43px",
                    showCurtain : true,
                    //Logo & Header Text(SAP INVESTMENT SYSTEM)
                    user: new sap.ui.unified.ShellHeadUserItem("oAppShellUser",{
                      username:oUserName,
                      image:"sap-icon://employee",
                      press:function(oEvent){
                        oResponsivePopover.openBy(oEvent.getSource());
                      }
                    }),
                    headEndItems: new sap.ui.unified.ShellHeadItem({
                      icon:"resources/images/SAP.png",
                      height:"100%"
                    }),
                    curtainContent : new sap.ui.core.ComponentContainer({
                        height : "100%",
                        name : "zhmmaim"
                    })
                }).addStyleClass("imHeaderBar").placeAt("content");
            });
        });
        </script>
        <script>
    $(document).ready(function () {
    });
    </script>

        <link href="resources/css/common_theme.css" rel="stylesheet" type="text/css" />
</head>

<body class="sapUiBody" id="content">

</body>

</html>